<mat-card class="staff-member-update-form-card" appearance="outlined">
  <mat-card-header>
    <mat-card-title>Update {{selectedStaffMember().displayName}}'s company entity</mat-card-title>
    <mat-card-subtitle>Select the new company entity and effective date for {{selectedStaffMember().displayName}}</mat-card-subtitle>
  </mat-card-header>
  <mat-card-content>
    <form [formGroup]="companyEntityCorrectionsForm">
      <mat-form-field class="staff-member-update-form-fields">
        <mat-label>Company entity</mat-label>
        <mat-select [formControl]="companyEntityCorrectionsForm.controls.companyEntity" placeholder="Select company entity">
          @for (companyEntity of allCompanyEntities$ | async; track companyEntity.companyEntityId) {
            <mat-option [value]="companyEntity">{{companyEntity.description}} ({{companyEntity.abbreviation}})</mat-option>
          }
        </mat-select>
        <mat-error *ngIf="companyEntityCorrectionsForm.controls.companyEntity.errors?.['required'] && companyEntityCorrectionsForm.controls.companyEntity.touched">Please select a company entity</mat-error>
      </mat-form-field>

      <mat-form-field class="staff-member-update-form-fields">
        <mat-label>Effective from</mat-label>
        <input matInput [matDatepicker]="startDatePicker" [formControl]="companyEntityCorrectionsForm.controls.startDate" placeholder="Choose a date">
        <mat-datepicker-toggle matIconSuffix [for]="startDatePicker"></mat-datepicker-toggle>
        <mat-datepicker #startDatePicker></mat-datepicker>
        <mat-error *ngIf="companyEntityCorrectionsForm.controls.startDate.errors?.['required'] && companyEntityCorrectionsForm.controls.startDate.touched">Please select an effective date</mat-error>
      </mat-form-field>

      <button mat-raised-button color="primary" type="button" [disabled]="companyEntityCorrectionsForm.invalid" (click)="submit()" matTooltip="Submit">
        Submit <mat-icon>check_circle</mat-icon>
      </button>
    </form>
  </mat-card-content>
</mat-card>
