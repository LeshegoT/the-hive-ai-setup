@if (assignmentTrackingTable.data.length !== 0) {
    <table mat-table
        class="mat-elevation-z8 full-width-table"
        [dataSource]="assignmentTrackingTable">

        <ng-container matColumnDef="displayName" >
            <th mat-header-cell *matHeaderCellDef>Staff Name</th>
            <td mat-cell *matCellDef="let row">
                {{row.displayName}}
            </td>
        </ng-container>

        <ng-container matColumnDef="upn" >
            <th mat-header-cell *matHeaderCellDef>Staff Email</th>
            <td mat-cell *matCellDef="let row">
                {{row.upn}}
            </td>
        </ng-container>

        <ng-container matColumnDef="unit" >
            <th mat-header-cell *matHeaderCellDef>Department</th>
            <td mat-cell *matCellDef="let row">
                {{row.unit}}
            </td>
        </ng-container>

        <ng-container matColumnDef="manager" >
            <th mat-header-cell *matHeaderCellDef>Reviewer</th>
            <td mat-cell *matCellDef="let row">
                {{row.manager}}
            </td>
        </ng-container>

        <ng-container matColumnDef="jobTitle" >
            <th mat-header-cell *matHeaderCellDef>Job Title</th>
            <td mat-cell *matCellDef="let row">
                {{row.jobTitle}}
            </td>
        </ng-container>

        <ng-container matColumnDef="numberOfOutstandingAssignments" >
            <th mat-header-cell *matHeaderCellDef>Assignments</th>
            <td mat-cell *matCellDef="let row" class="outstanding-assignments-count">
                {{row.numberOfOutstandingAssignments}}
            </td>
        </ng-container>

        <ng-container matColumnDef="entity" >
            <th mat-header-cell *matHeaderCellDef>Entity</th>
            <td mat-cell *matCellDef="let row" class="outstanding-assignments-count">
                {{row.entity}}
            </td>
        </ng-container>

        <ng-container matColumnDef="mostOutstanding" >
            <th mat-header-cell *matHeaderCellDef>Oldest FeedbackAssignment</th>
            <td mat-cell *matCellDef="let row">
                {{row.mostOutstanding | date}}
                <details (click)="$event.stopPropagation()">
                    <summary>Nudge All</summary>
                    <p>
                        <button mat-mini-fab color="primary" type="button"
                            (click)="sendBulkNudge(row, $event)"
                            matTooltip="Send Reminder"
                            matTooltipPosition="right">
                            <mat-icon>send</mat-icon>
                        </button>
                    </p>
                </details>
            </td>
        </ng-container>

        <tr mat-header-row
            *matHeaderRowDef="assignmentTrackingColumns; sticky: true">
        </tr>
        <tr mat-row
            *matRowDef="let row; columns: assignmentTrackingColumns;"
            (click)="rowSelectTask(row)"
            [ngClass]="rowSelected === row ? 'selected' : 'selectable-row'">
        </tr>
    </table>
    <mat-paginator
        #paginator
        [length]="currentPageInfo.resultSetSize"
        [pageIndex]="0"
        [pageSize]="currentPageInfo.pageSize" 
        [pageSizeOptions]="this.tableService.getPageSizeOptions()" 
        [showFirstLastButtons]="this.tableService.getShowFirstLastButtons()" 
        [hidePageSize]="this.tableService.getHidePageSize()"
        (page)="pageChanged($event)"
    ></mat-paginator> 
} @else {
    <p id="no-transgressors">There are no transgressors to show</p>
}