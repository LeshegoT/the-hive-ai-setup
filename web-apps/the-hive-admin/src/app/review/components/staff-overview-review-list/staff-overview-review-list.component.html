<label *ngIf="reviewTable.data.length === 0" class="noDataToDisplayLabel">No Current or Past Review Data</label>
<table *ngIf="reviewTable.data.length > 0" mat-table class="mat-elevation-z8 full-width-table" [dataSource]="reviewTable" matSort #reviewTableSort="matSort">
    <ng-container matColumnDef="userPrincipleName" >
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Staff Email</th>
        <td mat-cell *matCellDef="let row">
            {{ row.userPrincipleName}}
            <details>
                <summary>HR Rep</summary>
                @if (row.hrRep) {
                    <p>{{row.hrRep}}</p>
                } @else {
                    <!-- No HR Representative assigned -->
                    <p>(No HR Rep assigned)</p>
                }
            </details>
        </td>
    </ng-container>

    <ng-container matColumnDef="unit" >
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Unit</th>
        <td mat-cell *matCellDef="let row">
            {{ row.unit}}
        </td>
    </ng-container>

    <ng-container matColumnDef="review date" >
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Review Date</th>
        <td mat-cell *matCellDef="let row">
            {{ row.reviewDate | date }}
        </td>
    </ng-container>

     <ng-container matColumnDef="type" >
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Type</th>
        <td mat-cell *matCellDef="let row">
            {{row.templateName}}
        </td>
    </ng-container>

    <ng-container matColumnDef="status" >
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Review Status</th>
        <td mat-cell *matCellDef="let row" [ngClass]="setStatusStyle(row.reviewStatus)">
            <mat-label class="statusContainer">
              <mat-icon>{{setStatusIcon(row.reviewStatus)}}</mat-icon>
              {{row.reviewStatus}}
            </mat-label>
        </td>
    </ng-container>

    <ng-container matColumnDef="controls" >
        <th mat-header-cell *matHeaderCellDef mat-sort-header></th>
        <td mat-cell *matCellDef="let row">
            <div class="button-container">
                <button (click)="downloadReviewReport(row, $event)" class="notesBtnSmall reviewActionButton" [title]="row.requiresFeedback ? 'Download Report':'No feedback to download for this review'" [disabled]="!row.requiresFeedback"><mat-icon>save_alt</mat-icon></button>
                <button (click)="hrNotes(row)" class="notesBtnSmall reviewActionButton" title="Review Notes"><mat-icon>chat_bubble_outline</mat-icon></button>
                <button (click)="showReviewMeetingMinutes(row)" class="notesBtnSmall reviewActionButton" title="Review Meeting Minutes"><mat-icon>note_add</mat-icon></button>
            </div>
        </td>
    </ng-container>
     
    <tr mat-header-row *matHeaderRowDef="reviewColumns(); sticky: true"></tr>
    <tr mat-row *matRowDef="let row; columns: reviewColumns();"></tr>
</table>
