<div class="full-width">
    <mat-checkbox [(ngModel)]="isChecked" (click)='toggle()'>Add a new Track</mat-checkbox>
</div>  
<div class="full-width" [hidden]='isHidden'>
    <h3>Create New Track</h3>

  <form [formGroup]="trackForm" (submit)=createTrack()>
  
      <mat-form-field class="full-width">
        <mat-label>Code*</mat-label>
        <input matInput formControlName="code" [errorStateMatcher]="matcher" />
        <mat-hint align="end">Lower case letters, one word or hyphenated, max 50 characters</mat-hint>
      </mat-form-field>
  
      <mat-form-field class="full-width">
        <mat-label>Name*</mat-label>
        <input matInput formControlName="name" [errorStateMatcher]="matcher"/>
      </mat-form-field>
      <mat-form-field class="full-width">
        <mat-label>Icon*</mat-label>
        <input matInput formControlName="icon" [errorStateMatcher]="matcher"/>
      </mat-form-field>
      
      <div class="contentPickerTitle" *ngIf="addedGroups && addedGroups.length">
        <span>Track will be restricted to the following groups:</span>
        <table mat-table class="content-table mat-elevation-z8" [dataSource]="groupDataSource">
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef> Group </th>
            <td mat-cell *matCellDef="let group"> {{ group.groupName }} </td>
          </ng-container>
  
          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef> Action </th>
            <td mat-cell *matCellDef="let group"> 
              <button mat-stroked-button color="error" (click)="deleteGroup(group.groupName)" type="button">Delete</button>
            </td>
          </ng-container>
  
          <tr mat-header-row *matHeaderRowDef="displayedGroupColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedGroupColumns;"></tr>
        </table>
      </div>
  
      <div class="full-width addContentBlock">
        <mat-form-field class="addRestriction">
          <mat-label>Restrict content to group</mat-label>
          <mat-select formControlName="restrictions">
            <mat-option [value]="group" *ngFor="let group of groups$ | async">{{ group.groupName }}</mat-option>
          </mat-select>
          <mat-hint align="end">Create new groups by selecting Group above</mat-hint>
        </mat-form-field>
        <button mat-raised-button color="primary" class="addButton" (click)="addGroup()" type="button">Add</button>
      </div>
  
      <div class="error" *ngIf="error">
        Please ensure all required fields are filled in and that there are no errors above.
      </div>
  
      <div class="buttons">
      <button mat-raised-button color="primary" type="submit">Save</button>
      </div>
    </form>
  </div>
  